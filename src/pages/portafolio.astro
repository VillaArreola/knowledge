---
import "../styles/global.css";

const projects = [
  {
    title: "Lab de Red Segura",
    date: "2025-08-22",
    status: "Publicado",
    links: {
      blog: "https://tusitio.com/labs/red-segura",
      repo: "https://github.com/villa/lab-red-segura"
    },
    tags: ["pfSense","DMZ","Hardening"],
    summary: "Firewall + DMZ + servidor vulnerable con mitigaciones y evidencias."
  },
  {
    title: "Dashboard Seguro",
    date: "2025-11-28",
    status: "En progreso",
    links: { repo: "https://github.com/villa/dashboard-seguro" },
    tags: ["Next.js","Supabase","RBAC","Logs"],
    summary: "Login, roles, auditoría básica y despliegue en Vercel."
  }
];

const writeups = [
  {
    title: "THM: Bricks Heist",
    date: "2025-05-09",
    link: "https://tusitio.com/writeups/bricks-heist",
    tags: ["CVE-2024-25600","WordPress","RCE"],
    outcome: "Acceso inicial, contención, IOC y remediación."
  }
];

const certs = [
  { name: "AWS Cloud Practitioner", status: "Agendado", date: "2025-10-31", badge: "" },
  { name: "CompTIA Security+", status: "Planeado", date: "2026-03-20", badge: "" }
];

// KPIs calculados
const total = {
  projects: projects.length,
  writeups: writeups.length,
  certs: certs.length,
  published: projects.filter(p => p.status === "Publicado").length
};
---

<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Portafolio Técnico — Villa</title>
    <meta name="description" content="Labs, proyectos y certificaciones verificables." />
  </head>
  <body class="bg-slate-950 text-slate-100">
    <main class="max-w-6xl mx-auto p-6 space-y-8">
      <header class="flex items-center justify-between">
        <h1 class="text-3xl font-bold">Portafolio Técnico</h1>
        <a href="/cv.pdf" class="px-3 py-2 rounded-xl bg-slate-800">Descargar CV</a>
      </header>

      <!-- KPIs -->
      <section class="grid grid-cols-2 md:grid-cols-4 gap-4">
        <div class="p-4 rounded-2xl bg-slate-900">Proyectos: <b>{total.projects}</b></div>
        <div class="p-4 rounded-2xl bg-slate-900">Publicados: <b>{total.published}</b></div>
        <div class="p-4 rounded-2xl bg-slate-900">Write-ups: <b>{total.writeups}</b></div>
        <div class="p-4 rounded-2xl bg-slate-900">Certificaciones: <b>{total.certs}</b></div>
      </section>

      <!-- Proyectos -->
      <section class="space-y-3">
        <h2 class="text-2xl font-semibold">Proyectos</h2>
        <ul class="space-y-3">
          {projects.map(p => (
            <li class="p-5 rounded-2xl bg-slate-900 border border-slate-800">
              <div class="flex items-center justify-between">
                <h3 class="text-xl font-semibold">{p.title}</h3>
                <span class={`text-xs px-2 py-1 rounded-lg ${p.status === "Publicado" ? "bg-green-700/30" : "bg-yellow-700/30"}`}>{p.status}</span>
              </div>
              <p class="mt-2 text-slate-300">{p.summary}</p>
              <div class="mt-3 flex flex-wrap gap-2">
                {p.tags.map(t => <span class="text-xs bg-slate-800 px-2 py-1 rounded">{t}</span>)}
              </div>
              <div class="mt-3 flex gap-4 text-sm">
                {p.links.blog && <a class="underline" href={p.links.blog}>Entrada</a>}
                {p.links.repo && <a class="underline" href={p.links.repo}>Repositorio</a>}
                <span class="text-slate-400">{p.date}</span>
              </div>
            </li>
          ))}
        </ul>
      </section>

      <!-- Write-ups -->
      <section class="space-y-3">
        <h2 class="text-2xl font-semibold">Write-ups</h2>
        <ul class="space-y-3">
          {writeups.map(w => (
            <li class="p-5 rounded-2xl bg-slate-900 border border-slate-800">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">{w.title}</h3>
                <span class="text-slate-400 text-sm">{w.date}</span>
              </div>
              <p class="mt-2 text-slate-300">{w.outcome}</p>
              <a class="mt-2 inline-block underline" href={w.link}>Leer</a>
              <div class="mt-3 flex flex-wrap gap-2">
                {w.tags.map(t => <span class="text-xs bg-slate-800 px-2 py-1 rounded">{t}</span>)}
              </div>
            </li>
          ))}
        </ul>
      </section>

      <!-- Certificaciones -->
      <section class="space-y-3">
        <h2 class="text-2xl font-semibold">Certificaciones</h2>
        <ul class="grid md:grid-cols-2 gap-3">
          {certs.map(c => (
            <li class="p-5 rounded-2xl bg-slate-900 border border-slate-800">
              <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold">{c.name}</h3>
                <span class={`text-xs px-2 py-1 rounded ${c.status==="Agendado"?"bg-blue-700/30":"bg-slate-700/30"}`}>{c.status}</span>
              </div>
              <p class="text-sm text-slate-300">Fecha objetivo: {c.date}</p>
              {c.badge && <a class="underline mt-2 inline-block" href={c.badge}>Ver badge</a>}
            </li>
          ))}
        </ul>
      </section>
    </main>
  </body>
</html>
