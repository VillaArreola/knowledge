<!-- Hub de Categorías de Conocimiento -->
<div class="categories-container">
    <div class="categories-grid" id="categories-grid">
        <!-- Ciberseguridad -->
        <div class="category-card cyber">
            <div class="card-header">
                <div class="card-icon">🔐</div>
                <h2>Ciberseguridad</h2>
            </div>
            <div class="card-content">
                <p>Fundamentos de seguridad, criptografía y protección de sistemas</p>
                <div class="topics-grid">
                    <span class="topic-tag completed">🛡️ Fundamentos</span>
                    <span class="topic-tag completed">🔒 Criptografía</span>
                    <span class="topic-tag completed">🌐 Redes Seguras</span>
                    <span class="topic-tag completed">🔬 Forense</span>
                </div>
            </div>
            <div class="card-footer">
                <span class="progress-indicator active">7 temas completados</span>
            </div>
            <a href="/ciberseguridad" class="card-overlay"></a>
        </div>

        <!-- Redes -->
        <div class="category-card networks">
            <div class="card-header">
                <div class="card-icon">🌐</div>
                <h2>Redes</h2>
            </div>
            <div class="card-content">
                <p>Protocolos, configuración y administración de redes</p>
                <div class="topics-grid">
                    <span class="topic-tag completed">📡 Fundamentos</span>
                    <span class="topic-tag completed">🏗️ Arquitectura</span>
                    <span class="topic-tag completed">📋 Protocolos</span>
                    <span class="topic-tag completed">📶 WiFi</span>
                </div>
            </div>
            <div class="card-footer">
                <span class="progress-indicator active">1 tema completado</span>
            </div>
            <a href="/redes" class="card-overlay"></a>
        </div>

        <!-- Programación -->
        <div class="category-card programming">
            <div class="card-header">
                <div class="card-icon">💻</div>
                <h2>Programación</h2>
            </div>
            <div class="card-content">
                <p>Lenguajes, frameworks y desarrollo de aplicaciones</p>
                <div class="topics-grid">
                    <span class="topic-tag completed">🧮 Fundamentos</span>
                    <span class="topic-tag completed">🐍 Lenguajes</span>
                    <span class="topic-tag completed">⚡ Desarrollo Web</span>
                    <span class="topic-tag completed">🔄 DevOps</span>
                </div>
            </div>
            <div class="card-footer">
                <span class="progress-indicator active">1 tema completado</span>
            </div>
            <a href="/programacion" class="card-overlay"></a>
        </div>

        <!-- Sistemas -->
        <div class="category-card systems">
            <div class="card-header">
                <div class="card-icon">⚙️</div>
                <h2>Sistemas</h2>
            </div>
            <div class="card-content">
                <p>Administración de servidores e infraestructura</p>
                <div class="topics-grid">
                    <span class="topic-tag completed">🔐 Gobernanza</span>
                    <span class="topic-tag completed">🐧 Sistemas Operativos</span>
                    <span class="topic-tag completed">🖥️ Virtualización</span>
                    <span class="topic-tag completed">⚙️ Administración</span>
                </div>
            </div>
            <div class="card-footer">
                <span class="progress-indicator active">5 temas completados</span>
            </div>
            <a href="/sistemas" class="card-overlay"></a>
        </div>

        <!-- Cloud -->
        <div class="category-card cloud">
            <div class="card-header">
                <div class="card-icon">☁️</div>
                <h2>Cloud</h2>
            </div>
            <div class="card-content">
                <p>Servicios en la nube, AWS, Azure y arquitecturas cloud</p>
                <div class="topics-grid">
                    <span class="topic-tag completed">☁️ AWS</span>
                    <span class="topic-tag coming-soon">🔷 Azure</span>
                    <span class="topic-tag coming-soon">🔵 Google Cloud</span>
                    <span class="topic-tag coming-soon">🏗️ Arquitectura</span>
                </div>
            </div>
            <div class="card-footer">
                <span class="progress-indicator active">1 tema completado</span>
            </div>
            <a href="/cloud" class="card-overlay"></a>
        </div>
    </div>
</div>

<script>
// Función simple para cargar categorías
async function loadCategories() {
    console.log('🚀 Iniciando carga de categorías...');
    const grid = document.getElementById('categories-grid');
    if (!grid) {
        console.error('❌ No se encontró el elemento categories-grid');
        return;
    }
    console.log('✅ Elemento grid encontrado');

    const categories = [
        { 
            name: 'Ciberseguridad', 
            slug: 'ciberseguridad', 
            icon: '🔐', 
            color: 'cyber',
            jsonFile: 'search-ciberseguridad.json'
        },
        { 
            name: 'Redes', 
            slug: 'redes', 
            icon: '🌐', 
            color: 'networks',
            jsonFile: 'search-redes.json'
        },
        { 
            name: 'Programación', 
            slug: 'programacion', 
            icon: '💻', 
            color: 'programming',
            jsonFile: 'search-programacion.json'
        },
        { 
            name: 'Sistemas', 
            slug: 'sistemas', 
            icon: '⚙️', 
            color: 'systems',
            jsonFile: 'search-sistemas.json'
        },
        { 
            name: 'Cloud', 
            slug: 'cloud', 
            icon: '☁️', 
            color: 'cloud',
            jsonFile: 'search-cloud.json'
        }
    ];

    try {
        // Cargar datos de cada categoría
        for (const category of categories) {
            try {
                const response = await fetch(`/${category.jsonFile}`);
                if (response.ok) {
                    const data = await response.json();
                    category.topics = data.pages || [];
                    category.topicsCount = category.topics.length;
                    category.completedCount = category.topics.filter(t => t.status === 'completed').length;
                } else {
                    category.topics = [];
                    category.topicsCount = 0;
                    category.completedCount = 0;
                }
            } catch (error) {
                console.warn(`No se pudo cargar ${category.jsonFile}:`, error.message);
                category.topics = [];
                category.topicsCount = 0;
                category.completedCount = 0;
            }
        }

        console.log('✅ HTML generado, aplicando al DOM...');
        console.log('🎉 Manteniendo diseño estático por ahora');

    } catch (error) {
        console.error('❌ Error cargando categorías:', error);
        // No cambiar el contenido si hay error, mantener el fallback
    }
}

// Inicializar cuando el DOM esté listo
console.log('📋 Script de categorías cargado, esperando DOM...');
document.addEventListener('DOMContentLoaded', () => {
    console.log('🎯 DOM listo, iniciando carga de categorías...');
    loadCategories();
});
</script>

<style>
    /* Container principal */
    .categories-container {
        width: 100%;
        margin: 0;
        padding: 0;
    }

    /* Grid de categorías - Layout mejorado */
    .categories-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        gap: 24px;
        margin: 0;
        padding: 0;
        width: 100%;
    }
    
    /* Cards de categorías */
    .category-card {
        background: linear-gradient(135deg, rgba(255,255,255,0.95) 0%, rgba(248,250,252,0.98) 100%);
        backdrop-filter: blur(12px);
        border: 1px solid rgba(255,255,255,0.25);
        border-radius: 20px;
        padding: 28px;
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
        box-shadow: 
            0 8px 32px rgba(0,0,0,0.08),
            0 2px 8px rgba(0,0,0,0.04);
        cursor: pointer;
    }

    .category-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        opacity: 0;
        transition: opacity 0.3s ease;
        z-index: 2;
    }

    .category-card:hover {
        transform: translateY(-8px);
        box-shadow: 
            0 20px 40px rgba(0,0,0,0.12),
            0 8px 16px rgba(0,0,0,0.08);
    }

    .category-card:hover::before {
        opacity: 1;
    }

    /* Overlay para hacer toda la card clickeable */
    .card-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        z-index: 1;
        text-decoration: none;
    }

    /* Header de la card */
    .card-header {
        display: flex;
        align-items: center;
        gap: 16px;
        margin-bottom: 20px;
        position: relative;
        z-index: 2;
    }

    .card-icon {
        width: 56px;
        height: 56px;
        border-radius: 14px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 26px;
        box-shadow: 0 4px 16px rgba(0,0,0,0.1);
        flex-shrink: 0;
    }

    .card-header h2 {
        font-size: 1.6rem;
        font-weight: 700;
        color: #1f2937;
        margin: 0;
        line-height: 1.2;
        flex: 1;
    }

    /* Contenido de la card */
    .card-content {
        display: flex;
        flex-direction: column;
        gap: 16px;
        position: relative;
        z-index: 2;
    }

    .card-content p {
        color: #4b5563;
        line-height: 1.6;
        margin: 0;
        font-size: 1rem;
    }

    .topics-grid {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin: 0;
    }

    .topic-tag {
        padding: 8px 14px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: 500;
        display: inline-block;
        white-space: nowrap;
        border: 1px solid transparent;
        position: relative;
        z-index: 3;
        cursor: default;
    }

    .topic-tag.completed {
        background: #ecfdf5;
        color: #065f46;
        border-color: #a7f3d0;
    }

    .topic-tag.interactive {
        background: #eff6ff;
        color: #1e40af;
        border-color: #93c5fd;
    }

    .topic-tag.coming-soon {
        background: #fef3c7;
        color: #92400e;
        border-color: #fcd34d;
        opacity: 0.7;
    }

    .topic-tag.planned {
        background: #f3f4f6;
        color: #6b7280;
        border-color: #d1d5db;
        opacity: 0.6;
    }

    /* Footer de la card */
    .card-footer {
        border-top: 1px solid rgba(0,0,0,0.1);
        padding-top: 16px;
        margin-top: 20px;
        position: relative;
        z-index: 2;
    }

    .progress-indicator {
        font-size: 0.9rem;
        font-weight: 600;
        color: #059669;
    }

    .progress-indicator.active {
        color: #059669;
    }

    .progress-indicator.empty {
        color: #6b7280;
        font-style: italic;
    }

    /* Colores específicos por categoría */
    .category-card.cyber::before {
        background: linear-gradient(90deg, #dc2626, #ef4444);
    }
    
    .category-card.cyber .card-icon {
        background: linear-gradient(135deg, #dc2626, #ef4444);
        color: white;
    }

    .category-card.networks::before {
        background: linear-gradient(90deg, #2563eb, #3b82f6);
    }
    
    .category-card.networks .card-icon {
        background: linear-gradient(135deg, #2563eb, #3b82f6);
        color: white;
    }

    .category-card.programming::before {
        background: linear-gradient(90deg, #7c3aed, #8b5cf6);
    }
    
    .category-card.programming .card-icon {
        background: linear-gradient(135deg, #7c3aed, #8b5cf6);
        color: white;
    }

    .category-card.systems::before {
        background: linear-gradient(90deg, #059669, #10b981);
    }
    
    .category-card.systems .card-icon {
        background: linear-gradient(135deg, #059669, #10b981);
        color: white;
    }

    .category-card.cloud::before {
        background: linear-gradient(90deg, #0891b2, #06b6d4);
    }
    
    .category-card.cloud .card-icon {
        background: linear-gradient(135deg, #0891b2, #06b6d4);
        color: white;
    }

    /* Estados de carga */
    .loading-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        grid-column: 1 / -1;
    }

    .loading-animation {
        text-align: center;
    }

    .loading-dots {
        display: flex;
        justify-content: center;
        gap: 8px;
        margin-bottom: 16px;
    }

    .dot {
        width: 8px;
        height: 8px;
        background: #6366f1;
        border-radius: 50%;
        animation: dotPulse 1.4s ease-in-out infinite both;
    }

    .dot-1 { animation-delay: -0.32s; }
    .dot-2 { animation-delay: -0.16s; }
    .dot-3 { animation-delay: 0s; }

    @keyframes dotPulse {
        0%, 80%, 100% { transform: scale(0); }
        40% { transform: scale(1); }
    }

    .loading-text {
        color: #6b7280;
        font-size: 0.9rem;
    }

    .error-wrapper {
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 200px;
        grid-column: 1 / -1;
    }

    .error-animation {
        text-align: center;
    }

    /* Responsive Design */
    @media (max-width: 1200px) {
        .categories-grid {
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
    }

    @media (max-width: 1024px) {
        .categories-grid {
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 18px;
        }
        
        .category-card {
            padding: 24px;
        }
    }

    @media (max-width: 768px) {
        .categories-grid {
            grid-template-columns: 1fr;
            gap: 16px;
            margin: 0;
        }

        .category-card {
            padding: 20px;
        }

        .card-header {
            gap: 14px;
            margin-bottom: 18px;
        }

        .card-icon {
            width: 50px;
            height: 50px;
            font-size: 24px;
        }

        .card-header h2 {
            font-size: 1.4rem;
        }

        .card-content {
            gap: 14px;
        }

        .card-content p {
            font-size: 0.95rem;
        }

        .topics-grid {
            gap: 6px;
        }

        .topic-tag {
            font-size: 0.8rem;
            padding: 6px 12px;
        }

        .card-footer {
            padding-top: 14px;
        }

        .progress-indicator {
            font-size: 0.85rem;
        }
    }

    @media (max-width: 480px) {
        .categories-grid {
            gap: 12px;
            margin: 0;
        }

        .category-card {
            padding: 18px;
            border-radius: 16px;
        }

        .card-header {
            gap: 12px;
            margin-bottom: 16px;
        }

        .card-icon {
            width: 46px;
            height: 46px;
            font-size: 22px;
        }

        .card-header h2 {
            font-size: 1.3rem;
        }

        .card-content {
            gap: 12px;
        }

        .card-content p {
            font-size: 0.9rem;
        }

        .topics-grid {
            gap: 5px;
        }

        .topic-tag {
            font-size: 0.75rem;
            padding: 5px 10px;
        }

        .card-footer {
            padding-top: 12px;
        }

        .progress-indicator {
            font-size: 0.8rem;
        }
    }
</style>